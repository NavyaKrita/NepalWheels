var Admin=Admin||{};Admin.Navigation=function(){var r=function(){var n={},t=$("a.nav-link");return t.each(function(){var t=$(this).parentsUntil(".nav-sidebar"),r,f,i,u,e;switch(t.length){case 1:r=$(t).find("a").attr("href");f=$(t).find("a").find("p").html();n[r]={title:f,link:r,parent:null,grandParent:null};break;case 3:r=$(t).eq(0).find("a").attr("href");f=$(t).eq(0).find("a").find("p").html();i=$(t).eq(2).find("a").find("p").html();i=i.substring(0,i.indexOf("<i class"));n[r]={title:f,link:r,parent:i,grandParent:null};break;case 5:r=$(t).eq(0).find("a").attr("href");f=$(t).eq(0).find("a").find("p").html();i=$(t).eq(2).find("a").find("p").html();i=i.substring(0,i.indexOf("<i class"));u=$(t).eq(4).find("a").find("p").html();u=u.substring(0,u.indexOf("<i class"));n[r]={title:f,link:r,parent:i,grandParent:u};break;case 7:if(r=$(t).eq(0).find("a").attr("href"),f=$(t).eq(0).find("a").find("p").html(),!f)break;i=$(t).eq(2).find("a").find("p").html();i=i.substring(0,i.indexOf("<i class"));u=$(t).eq(4).find("a").find("p").html();u=u.substring(0,u.indexOf("<i class"));e=$(t).eq(6).find("a").find("p").html();e=e.substring(0,e.indexOf("<i class"));n[r]={title:f,link:r,parent:i,grandParent:u,greatGrandParent:e}}}),n},n,t=function(){n=r()},i={};return{enumerate:function(t){var r,i;for(r in n)i=n[r],t.call(i,i)},open:function(n){if(i.open){var t=$.Event("open",{url:n});if(i.open.fire(t),t.isDefaultPrevented())return}window.location.href=n},initOnce:function(){n||t()},init:t}}();Admin=Admin||{};Admin.Search=function(){var n=function(n){var i=function(){return n.greatGrandParent?$("<p/>").text([n.greatGrandParent,n.grandParent,n.parent].join(" > ")).html():n.grandParent?$("<p/>").text([n.grandParent,n.parent].join(" > ")).html():n.parent},t='<div id="user-selection"><h5>'+n.title+"<\/h5>";return i()&&(t=t+i()),t+"<\/div>"},t=function(n){var t=function(n,t){return n.rate<t.rate?1:n.rate>t.rate?-1:n.title<t.title?-1:n.title>t.title?1:0};return function(i,r){var f=[],u=new RegExp(i,"i"),e=new RegExp("nop-templates.com/(.*?)-for-nopcommerce-documentation","i"),o=new RegExp("/admin/(.*?)ThemeAdmin/ManageResources","i");n(function(n){var t=0;n.link=="#"||(u.test(n.title)?t+=10:u.test(n.parent)?t+=5:u.test(n.grandParent)?t+=3:u.test(n.greatGrandParent)&&(t+=1));o.test(n.link)&&(t-=1);e.test(n.link)&&(t-=2);t>0&&(n.rate=t,f.push(n))});f.sort(t);r(f)}};return{init:function(){var i,r;Admin.Navigation.initOnce();i=$(".admin-search-box");i.blur(function(n){n.preventDefault();n.stopPropagation()});i.typeahead({minLength:2,highlight:!0,hint:!1},{name:"pages",displayKey:"name",templates:{empty:'<div class="empty-message">\nNO RESULTS\n<\/div>',suggestion:n},source:t(Admin.Navigation.enumerate),limit:10});r=function(n){i.typeahead("val","");Admin.Navigation.open(n.link)};i.on("typeahead:selected",function(n,t){r(t)})}}}();