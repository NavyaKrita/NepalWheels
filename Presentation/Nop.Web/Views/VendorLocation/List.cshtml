@model NkVendorLocationListModel
@{
    Layout = "_ColumnsOne";

    //title
    Html.AddTitleParts(T("PageTitle.VendorLocation").Text);
    //page class
    Html.AppendPageCssClassParts("html-blog-page");
}

<style>
    .vendor-row {
        display: table;
        width: 100%;
        padding: 10px;
        background: #2C2C2C;
        /*text-align: center*/
    }

        .vendor-row .vendor-column {
            display: table-cell;
        }

    .vendor-column .vendor-search {
        background-color: #f3cc2e;
        border: none;
        padding: 15px 30px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        cursor: pointer;
        color: #000000;
    }

        .vendor-column .vendor-search:before {
            font-family: "Manrope";
            text-transform: none;
            content: "Search";
            width: 21px;
            /* font-size: 12px; */
            color: #2c2c2c;
            text-align: left;
            display: inline-block;
            opacity: .5;
        }

    .vendor-column .area-label {
        padding-left: 2px;
        padding-right: 8px;
        color: #90908A;
    }

    .vendor-column .area-dropdown {
        padding-right: 15px;
    }

        .vendor-column .area-dropdown:hover {
            color: #000000;
        }

    select {
        min-width: 150px;
        background-color: #F5F5F5;
        color: #90908A;
    }

    .search-select {
        height: 40px;
        border-radius: 6px;
        /*background-color: #f5f5f7;*/
    }

    .search-button {
        width: 100%;
        margin: 0;
    }

        .search-button:before {
            font-family: "venture-font";
            text-transform: none;
            content: "e";
            width: 21px;
            font-size: 12px;
            color: #2c2c2c;
            text-align: left;
            display: inline-block;
            opacity: .5;
        }

    .home-page-filters > div {
        display: table-cell;
        padding: 0 3.5px;
        vertical-align: middle;
    }

    .home-page-filter-button {
        min-width: 215px;
    }

    .home-page-filter-button {
        overflow: hidden;
    }

        .home-page-filter-button:last-child {
            position: relative;
        }
    .genre {
        font-weight:500;
        color: #2688BC;
        font-size:16px;
    }
    .banner-btn {
        /*width: 180px;*/
        height: 48px;
        border-radius: 6px;
        background-color: #2789bd;
        border: none;
        font-size: 16px;
        color: #ffffff;
        font-weight: 600;
        font-family: 'Manrope';
        text-align: center;
    }
</style>

<div class="container">
    <div class="page-title">
        <h1>
            @T("NkVendorLocation.Fields.VendorLocation")
        </h1>
    </div>
    <div class="row pt-20 pb-40">
        @*<div class="vendor-column">
            <label>@T("NkVendorLocation.Fields.Genre")</label>
        </div>*@
        <div class="col-lg-2 col-md-4">
            <span class="area-label">@T("NkVendorLocation.Fields.Genre")</span>
            <span class="area-dropdown">
                <nop-select asp-for="@Model.PagingFilteringContext.GenreId" asp-items="@Model.PagingFilteringContext.Genre" />
            </span>
        </div>
        <div class="col-lg-2 col-md-4">
            <span class="area-label">@T("NkVendorLocation.Fields.Manufacturer")</span>
            <span class="area-dropdown">
                <nop-select asp-for="@Model.PagingFilteringContext.ManufacturerId" asp-items="@Model.PagingFilteringContext.Manufacture" />
            </span>
        </div>
        <div class="col-lg-3 col-md-4">
            <span class="area-label">@T("NkVendorLocation.Fields.State")</span>
            <span class="area-dropdown">
                <nop-select asp-for="@Model.PagingFilteringContext.StateId" asp-items="@Model.PagingFilteringContext.State" />
            </span>
        </div>
        <div class="col-lg-2 col-md-4">
            <span class="area-label">@T("NkVendorLocation.Fields.Districts")</span>
            <span class="area-dropdown">
                <nop-select asp-for="@Model.PagingFilteringContext.DistrictId" asp-items="@Model.PagingFilteringContext.District" />
            </span>
        </div>
        @*<div class="col-lg-2 col-md-4 home-page-filter-button" style="padding-top:25px; color:#fff;">
            <span>
                <button type="button" id="search-location" class="search-button pt-10 pb-10">
                    <a> SEARCH</a>
                </button>
            </span>
        </div>*@
        <div class="col-lg-3 col-12 col-md-3 home-page-filter-button" style="padding-top:25px;">
            <span>
                <button type="button" id="search-location" class="banner-btn mobile-mb-2 w-100 ">SEARCH</button>
            </span>
        </div>
    </div>

    <div class="page blog-page">
        <div class="page-body">
            <div class="table-wrapper">
                <table class="cart">
                    <thead>
                        <tr>
                            <th class="genre">
                                @T("NkVendorLocation.Fields.Genre")
                            </th>
                            <th class="dealername">
                                @T("NkVendorLocation.Fields.DealerName")
                            </th>
                            <th class="phoneno">
                                @T("NkVendorLocation.Fields.PhoneNo")
                            </th>
                            <th class="contactperson">
                                @T("NkVendorLocation.Fields.ContactPerson")
                            </th>
                            <th class="mobileno">
                                @T("NkVendorLocation.Fields.MobileNo")
                            </th>
                            <th class="address">
                                @T("NkVendorLocation.Fields.Address")
                            </th>
                            <th class="districtname">
                                @T("NkVendorLocation.Fields.DistrictName")
                            </th>
                            <th class="email">
                                @T("NkVendorLocation.Fields.Email")
                            </th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var item in Model.VendorLocations)
                        {
                            <tr>
                                <td class="genre">
                                    <div class="genre">
                                        @Html.Raw(item.Genre)
                                    </div>

                                </td>
                                <td class="dealername">
                                    <div class="dealername">
                                        @Html.Raw(item.DealerName)
                                    </div>

                                </td>
                                <td class="phoneno">
                                    <div class="phoneno">
                                        @Html.Raw(item.PhoneNo)
                                    </div>

                                </td>
                                <td class="contactperson">
                                    <div class="contactperson">
                                        @Html.Raw(item.ContactPerson)
                                    </div>

                                </td>
                                <td class="mobileno">
                                    <div class="mobileno">
                                        @Html.Raw(item.MobileNo)
                                    </div>

                                </td>
                                <td class="address">
                                    <div class="address">
                                        @Html.Raw(item.Address)
                                    </div>

                                </td>
                                <td class="districtname">
                                    <div class="districtname">
                                        @Html.Raw(item.DistrictName)
                                    </div>

                                </td>
                                <td class="email">
                                    <div class="email">
                                        @Html.Raw(item.Email)
                                    </div>

                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>


            @{
                var pager = Html.Pager(Model.PagingFilteringContext).QueryParam("pagenumber");
            }
            @if (!(await pager.IsEmpty()))
            {
                <div class="pager">
                    @pager
                </div>
            }

            <script asp-location="Footer">
            $(document).ready(function () {
                        //load district when changing a country dropdownlist
                    $("#@Html.IdFor(model =>model.PagingFilteringContext.StateId)").change(function () {
                            var selectedItem = $(this).val();
                            var ddlDistricts = $("#@Html.IdFor(model => model.PagingFilteringContext.DistrictId)");
                            $.ajax({
                                cache: false,
                                type: "GET",
                                url: "@(Url.Action("GetDistrictByStateId", "VendorLocation"))",
                                data: {
                                    "stateId": selectedItem,
                                    "addAsterisk": "false"
                                },
                                success: function (data, textStatus, jqXHR) {
                                    ddlDistricts.html('');
                                    $.each(data, function(id, option) {
                                        ddlDistricts.append($('<option></option>').val(option.id).html(option.name));
                                    });
                                },
                                error: function (jqXHR, textStatus, errorThrown) {
                                  /*  $("#statesAlert").click();*/
                                }
                            });
                        });
                $("#search-location").on("click", function () {
                    var ddlDistrict = $("#@Html.IdFor(model => model.PagingFilteringContext.DistrictId)");
                    var ddlManufacturerId = $("#@Html.IdFor(model => model.PagingFilteringContext.ManufacturerId)");
                    var ddlStateId = $("#@Html.IdFor(model => model.PagingFilteringContext.StateId)");
                    var ddlGenreId = $("#@Html.IdFor(model => model.PagingFilteringContext.GenreId)");
                    var url = "@Url.Content("~/VendorLocation/List")";

                    window.location.href = url + "?districtId=" + ddlDistrict.val() + "&manufacturerId=" + ddlManufacturerId.val() + "&stateId=" + ddlStateId.val() + "&genreId=" + ddlGenreId.val();
                })
                 $("#@Html.IdFor(model =>model.PagingFilteringContext.StateId)").trigger("change");
            });

            </script>
        </div>
    </div>
</div>
