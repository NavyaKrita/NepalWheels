@model NopAjaxFiltersProPublicModel

@{
    var theme = await ThemeHelper.GetPluginThemeAsync(SevenSpikes.Nop.Plugins.AjaxFilters.Pro.Infrastructure.Constants.Plugin.FolderName);

    Html.AddCssFileParts("~/Plugins/SevenSpikes.Nop.Plugins.AjaxFilters.Pro/Themes/" + theme + "/Content/FilterWidget.css");

    var supportRtl = (await EngineContext.Current.Resolve<IWorkContext>().GetWorkingLanguageAsync()).Rtl;

    if (supportRtl)
    {
        Html.AddCssFileParts("~/Plugins/SevenSpikes.Nop.Plugins.AjaxFilters.Pro/Themes/" + theme + "/Content/FilterWidget.rtl.css");
    }

    var kendoVersion = "2020.1.406";

    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.core.min.js");
    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.data.odata.min.js");
    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.data.min.js");
    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.popup.min.js");
    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.list.min.js");
    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.dropdownlist.min.js");
    Html.AddScriptParts(ResourceLocation.Footer, $"~/lib/kendo/{kendoVersion}/js/kendo.fx.min.js");

    Html.AddScriptParts(ResourceLocation.Footer, "~/Plugins/SevenSpikes.Nop.Plugins.AjaxFilters.Pro/Scripts/AjaxFiltersPro.min.js");

    var showCategoryDropdown = Model.UIMode == NopAjaxFiltersProUIMode.CategoryOnly;
    var showCategoryAndSubcategoryDropdown = Model.UIMode == NopAjaxFiltersProUIMode.CategoryAndSubcategory;
    var showManufacturerDropdown = Model.UIMode == NopAjaxFiltersProUIMode.ManufacturerOnly;
    var showCategoryAndManufacturerDropdown = Model.UIMode == NopAjaxFiltersProUIMode.CategoryAndManufacturer;
    var showCategorySubcategoryAndManufacturerDropdown = Model.UIMode == NopAjaxFiltersProUIMode.CategorySubcategoryAndManufacturer;
}

<form asp-controller="AjaxFiltersProSearch" asp-action="Search" id="AjaxFiltersProForm">
    <div class="newsletter-area home-page-filters-wrapper ajax-filters-pro"
         data-showCategoryDropdown="@showCategoryDropdown.ToString().ToLowerInvariant()"
         data-showCategoryAndSubcategoryDropdown="@showCategoryAndSubcategoryDropdown.ToString().ToLowerInvariant()"
         data-showManufacturerDropdown="@showManufacturerDropdown.ToString().ToLowerInvariant()"
         data-showCategoryAndManufacturerDropdown="@showCategoryAndManufacturerDropdown.ToString().ToLowerInvariant()"
         data-showCategorySubcategoryAndManufacturerDropdown="@showCategorySubcategoryAndManufacturerDropdown.ToString().ToLowerInvariant()"
         data-categoryResource="@T("SevenSpikes.NopAjaxFiltersPro.Client.Category")"
         data-subcategoryResource="@T("SevenSpikes.NopAjaxFiltersPro.Client.Subcategory")"
         data-manufacturerResource="@T("SevenSpikes.NopAjaxFiltersPro.Client.Manufacturer")"
         data-getCategoriesUrl="@Url.Action("GetCategories", "AjaxFiltersProSearch")"
         data-getManufacturersUrl="@Url.Action("GetManufacturers", "AjaxFiltersProSearch")"
         data-getSpecificationsUrl="@Url.Action("GetSpecification", "AjaxFiltersProSearch")">

        <div class="container">
            <div class="home-page-filters newsletter-wrapper-all">
                <div class="col-lg-3 col-12 col-md-3">
                    <p class="search-text">@T("SevenSpikes.Themes.Venture.Common.HomePageAjaxFiltersPro.Title")</p>
                </div>

                @if (Model.UIMode != NopAjaxFiltersProUIMode.ManufacturerOnly)
                {
                    <div class="col-lg-3 col-12 col-md-3 search-select home-page-filter-selector">
                        <input type="hidden" id="categories" name="categoryId" value="0" autocomplete="off" />
                    </div>
                }

                @if (Model.UIMode == NopAjaxFiltersProUIMode.CategoryAndSubcategory || Model.UIMode == NopAjaxFiltersProUIMode.CategorySubcategoryAndManufacturer)
                {
                    <div class="col-lg-3 col-12 col-md-3 search-select home-page-filter-selector search-select">
                        <input type="hidden" id="ajax-filters-pro-subcategories" name="subCategoryId" value="0" autocomplete="off" />
                    </div>
                }

                @if (Model.UIMode == NopAjaxFiltersProUIMode.ManufacturerOnly || Model.UIMode == NopAjaxFiltersProUIMode.CategoryAndManufacturer || Model.UIMode == NopAjaxFiltersProUIMode.CategorySubcategoryAndManufacturer)
                {
                    <div class="col-lg-3 col-12 col-md-3  search-select home-page-filter-selector">
                        <input type="hidden" id="manufacturers" name="manufacturerId" value="0" autocomplete="off" />
                    </div>
                }

                @foreach (var spec in Model.Specifications)
                {
                    <div class="col-lg-3 col-12 col-md-3  search-select home-page-filter-selector">
                        <input type="hidden" id="specification_@(spec.Id)" name="specificationOptions" value="0" class="ajaxFiltersProSpecificationItem" data-id="@spec.Id" data-name="@Html.Raw(spec.Name)" autocomplete="off" />
                    </div>
                }
                <div class="col-lg-3 col-12 col-md-3 home-page-filter-button search-select">
                    <span id="home-page-filter-total-products-count" class="results-number"></span>
                    <button type="submit" class="search-button">@T("SevenSpikes.NopAjaxFiltersPro.Client.Search")</button>
                </div>
            </div>
        </div>
    </div>
</form>